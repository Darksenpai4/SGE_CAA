# PR601

## Campos de modelo

## Creacion de los campos

En esta tarea se pide crear un modulo **gestion_productos** con tipos de datos/campos distintos.

Para ello empezaremos con la creacion del archivo **product_model.py**. Donde se pide que tenga los siguientes registos:

**1. Información Básica**
* **Nombre del producto:** Nombre comercial.
* **Descripción del producto:** Detalle de las características.
* **Código de producto:** (Campo obligatorio) Identificador único.
* **Imagen del producto:** Archivo o enlace de imagen.

**2. Categoría y Tipo de Producto**
* **Categoría:** Selección obligatoria entre:
  * Jardín
  * Hogar
  * Electrodomésticos
* **Tipo de producto:** Indica si es un producto **destacable** o no.

**3. Información Económica**
* **Precio de venta:** Valor de mercado.
* **Stock disponible:** Cantidad de unidades físicas.

**4. Fechas y Disponibilidad**
* **Fecha de creación:** Fecha actual del sistema.
* **Fecha de última actualización:** Fecha de la última modificación.

**5. Información Adicional**
* **Activo:** Indica disponibilidad (`True` por defecto).
* **Peso del producto:** Valor numérico con precisión de dos decimales


### product_model.py
```py
# -*- coding: utf-8 -*-
from odoo import models, fields, api

class GestionProducto(models.Model):
    _name = 'gestion.producto'
    _description = 'Gestión de Productos'

    # Información básica
    nombre = fields.Char()
    descripcion = fields.Text()
    codigo = fields.Char()
    imagen = fields.Image()

    # Categoría y tipo
    categoria = fields.Selection(
        [('jardin', 'Jardín'),
         ('hogar', 'Hogar'),
         ('electrodomesticos', 'Electrodomésticos')],
    )
    destacable = fields.Boolean()

    # Información económica
    precio_venta = fields.Float()
    stock_disponible = fields.Integer()

    # Fechas
    fecha_creacion = fields.Datetime(
        string='Fecha de creación',
        default=fields.Datetime.now
    )
    fecha_actualizacion = fields.Datetime(
        string='Fecha de última actualización',
        default=fields.Datetime.now
    )

    # Información adicional
    activo = fields.Boolean()
    peso = fields.Float(digits=(6, 2))
```

Como podemos observar encontramos los siguientes campos:

- **fields.chars():** Este campo hace referencia a que guardaremos datos de tipo breve, es decir, que son cadenas de texto cortas

- **fields.Text():** Este campo nos deja almacenar mayor cantidad de datos en tipo texto

- **fields.Image():** Nos permite guardar una imagen

- **fields.Selection():** Este campo nos permite pasar como valores una tupla de etiqueta valor, donde estas seran las posibles opciones de seleccion a la hora de crear el objeto

- **fields.Booelan():** Almacena un booleano

- **fields.Float():** Almacenamos un flotante, es decir, un numero decimal. Tambien encontramos el caso de que podemos indicar cuantos valores decimales pueda tener este, donde se lo marcamos con **digits=(6,2)**

- **fields.Datetime()**: Este nos permite guardar la hora de creacion. Como podemos ver en su interior le seteamos con **Default** la fecha actual **fiedls.Dtetime.now**

IMPORTANTE una vez tenemos este archivo configurado, recordemos editar el \_\_init\_\_.py para que se use este modelo
```py
from . import product_model
```

## Archivos editados
### Views
**product_view.xml**
```xml
<odoo>
  <data>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="gestion_productos.list">
      <field name="name">gestion_productos list</field>
      <field name="model">gestion.producto</field>
      <field name="arch" type="xml">
        <tree>
          <field name="nombre"/>
          <field name="codigo"/>
          <field name="categoria"/>
          <field name="precio_venta"/>
          <field name="stock_disponible"/>
          <field name="activo"/>
        </tree>
      </field>
    </record>


    <!-- actions opening views on models -->

    <record model="ir.actions.act_window" id="gestion_productos.action_window">
      <field name="name">Productos</field>
      <field name="res_model">gestion.producto</field>
      <field name="view_mode">tree,form</field>
    </record>


    <!-- server action to the one above -->
<!--
    <record model="ir.actions.server" id="gestion_productos.action_server">
      <field name="name">gestion_productos server</field>
      <field name="model_id" ref="model_gestion_productos_gestion_productos"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "tree,form",
          "res_model": model._name,
        }
      </field>
    </record>
-->

    <!-- Top menu item -->

    <menuitem name="Gestión de Productos" id="gestion_productos.menu_root"/>

    <!-- menu categories -->
<!--
    <menuitem name="Menu 1" id="gestion_productos.menu_1" parent="gestion_productos.menu_root"/>
    <menuitem name="Menu 2" id="gestion_productos.menu_2" parent="gestion_productos.menu_root"/>
-->
    <!-- actions -->

    <menuitem name="Productos" id="gestion_productos.menu_productos" parent="gestion_productos.menu_root" action="gestion_productos.action_window"/>
    <!-- <menuitem name="Server to list" id="gestion_productos" parent="gestion_productos.menu_2" action="gestion_productos.action_server"/> -->

  </data>
</odoo>
```

**ir.model.access.csv**
```csv
id,name,model_id:id,group_id:id,perm_read,perm_write,perm_create,perm_unlink
access_gestion_producto,access.gestion.producto,model_gestion_producto,base.group_user,1,1,1,1
```

## Funcionamiento
![Error de carga](./img/Gestion.jfif)