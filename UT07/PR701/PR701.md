# PR701

## Página estática y dinámica básica

### Creacion de la página estática

En el archivo: `controllers/controllers.py`, descomentaremos la plantilla para poder utilizar su código. Cambiaremos la url de acceso a `/bienvenida` e indicaremos que es una página web. Al devolver, devolveremos `views/templates.xml`, la template de bienvenida

```python
# -*- coding: utf-8 -*-
from odoo import http

class Taller(http.Controller):

    @http.route('/bienvenida', auth='public', website=True)
    def bienvenida(self, **kw):
        return http.request.render('taller.template_bienvenida')
```

Seguidamente, modificaremos el archivo: `views/templates.xml`, donde `t-call="website.layout"` heredará el diseño de la web de Odoo. y el contenido del `<div>` es lo que verá el usuario. Con esto estaría creada la página estática

```xml
<odoo>

    <template id="template_bienvenida" name="Bienvenida">
        <t t-call="website.layout">
            <div class="container mt-5">
                <h1>Bienvenido a nuestra página web</h1>
                <p>Este es el taller.</p>
            </div>
        </t>
    </template>

</odoo>
```
---

### Página dinámica

Ahora vamos a mostrar datos del modelo `taller.vehiculo`. Dentro del archivo: `controllers/controllers.py`, añadimos este método dentro de la clase, debajo del anterior. `request.env['taller.vehiculo']` accederá al modelo, `search([])` obtendrá todos los registros y `'vehiculos': vehiculos` enviará la variable al template.

```python
    @http.route('/vehiculos', auth='public', website=True)
    def listar_vehiculos(self, **kw):
        vehiculos = http.request.env['taller.vehiculo'].search([])
        return http.request.render('taller.template_vehiculos', {
            'vehiculos': vehiculos,
        })
```

**Recordatorio**: El nombre enviado debe coincidir con el usado en el template.

Seguidamente, trabajaremos en el archivo: `views/templates.xml`, para añadir la plantilla. Añadimos debajo de la plantilla anterior:

```xml
    <template id="template_vehiculos" name="Listado Vehiculos">
        <t t-call="website.layout">
            <div class="container mt-5">
                <h1>Listado de Vehículos</h1>

                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Matrícula</th>
                            <th>Marca</th>
                            <th>Modelo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="vehiculos" t-as="vehiculo">
                            <tr>
                                <td><t t-esc="vehiculo.matricula"/></td>
                                <td><t t-esc="vehiculo.marca"/></td>
                                <td><t t-esc="vehiculo.modelo"/></td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>
```

Donde `t-foreach="vehiculos"` recorrerá la lista enviada desde el controller, `t-as="vehiculo"` es el nombre temporal para cada registro y `t-esc="vehiculo.matricula"` mostrará el valor del campo. Con esto ya tendríamos terminado el ejercicio.